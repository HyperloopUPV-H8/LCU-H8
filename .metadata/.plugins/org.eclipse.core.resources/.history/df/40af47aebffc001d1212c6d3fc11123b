#pragma once
#include "../ControlBlock.hpp"

template<size_t U, size_t V, size_t W> class MatrixMultiplier;

template<size_t U, size_t V, size_t W>
class MatrixMultiplier<U,V,W> : public ControlBlock<double(&)[U][V], double(&)[V][U]>{
	double(&A)[U][V], (&B)[V][W], (&result)[U][W];
	MatrixMultiplier(double(&A)[U][V], double(&B)[V][W], double(&result)[U][W]) : A(A), B(B), result(result){
		this->output_value = result;
	}

	void execute() override{
		for (int i = 0; i < U; i++)
			for (int j = 0; j < U; j++)
				for (int k = 0; k < U; k++)
					result[i * U + j] += A[i * U + k] * B[k * U + j];
	}
};

template<size_t U, size_t W>
class MatrixMultiplier<U,1,W> : public ControlBlock<double(&)[U][V], double(&)[V][U]>{

};
